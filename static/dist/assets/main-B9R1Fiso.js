document.addEventListener("DOMContentLoaded",function(){const p=document.getElementById("mobile-menu-button"),u=document.getElementById("mobile-menu");p==null||p.addEventListener("click",()=>{u==null||u.classList.toggle("hidden")});const U=[{name:"Python",icon:'<svg class="tech-icon" ...></svg>'},{name:"TensorFlow",icon:'<svg class="tech-icon" ...></svg>'},{name:"Django",icon:'<svg class="tech-icon" ...></svg>'},{name:"Docker",icon:'<svg class="tech-icon" ...></svg>'},{name:"AutoCAD",icon:'<svg class="tech-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7l10 5 10-5-10-5zm0 11.5L4.5 10.25l7.5-3.75 7.5 3.75L12 13.5zM2 17l10 5 10-5-10-5-10 5z"/></svg>'},{name:"Excel",icon:'<svg class="tech-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M21.17 3.25a2 2 0 00-2-2H4.83a2 2 0 00-2 2v17.5a2 2 0 002 2h14.34a2 2 0 002-2V3.25zm-14.9 15.5l3.54-3.54-3.54-3.54h2.83l2.12 2.12 2.12-2.12h2.83l-3.54 3.54 3.54 3.54h-2.83l-2.12-2.12-2.12 2.12H6.27z"/></svg>'},{name:"n8n",icon:'<svg class="tech-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zm-2.29 14.71a.75.75 0 01-1.06-1.06L11.88 12 8.65 8.77a.75.75 0 011.06-1.06L13 10.88l3.23-3.17a.75.75 0 111.06 1.06L14.12 12l3.23 3.17a.75.75 0 01-1.06 1.06L13 13.12l-3.29 3.59z"/></svg>'},{name:"JavaScript",icon:'<svg class="tech-icon" ...></svg>'},{name:"PyTorch",icon:'<svg class="tech-icon" ...></svg>'},{name:"Scikit-learn",icon:'<svg class="tech-icon" ...></svg>'},{name:"Git",icon:'<svg class="tech-icon" ...></svg>'},{name:"SQL",icon:'<svg class="tech-icon" ...></svg>'}];function $(){const t=document.querySelector("#technologies .grid");t&&(t.innerHTML=U.map(n=>`
                <div class="text-center transition-transform hover:scale-110 hover:text-white flex flex-col items-center">
                    <div class="w-12 h-12 mb-2 flex items-center justify-center">${n.icon}</div>
                    <span>${n.name}</span>
                </div>
            `).join(""))}$();const L=document.getElementById("project-modal"),f=document.getElementById("project-modal-overlay"),C=document.getElementById("project-modal-content"),B=document.querySelectorAll("[data-title]");function T(t){var a;if(!C)return;const n=t.technologies.split(",").map(o=>`<span class="project-card-tag">${o.trim()}</span>`).join("");C.innerHTML=`
            <div class="p-4 border-b border-slate-700 flex justify-between items-center sticky top-0 z-10 glass-effect">
                <h2 id="modal-title" class="text-2xl font-bold text-white">${t.title}</h2>
                <button id="modal-close-btn" class="text-slate-400 hover:text-white text-3xl leading-none">&times;</button>
            </div>
            <div class="p-6 md:p-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="md:col-span-2">
                        <img id="modal-main-image" src="${t.imageUrl}" alt="Imagem principal do projeto" class="w-full rounded-lg mb-4">
                        <div id="modal-long-description" class="text-slate-300 space-y-4 mt-8">
                             <h4 class="text-lg font-bold text-white mb-2">Descrição Completa</h4>
                             <p>${t.description.replace(/\n/g,"<br>")}</p>
                        </div>
                    </div>
                    <div class="md:col-span-1">
                        <h3 class="text-xl font-bold text-white mb-4">Tecnologias</h3>
                        <div id="modal-tags" class="flex flex-wrap gap-2 mb-6">${n}</div>
                        
                        <h3 class="text-xl font-bold text-white mt-6 mb-4">Links</h3>
                        <div class="space-y-3">
                            ${t.projectUrl?`<a href="${t.projectUrl}" target="_blank" rel="noopener noreferrer" class="flex items-center btn-secondary w-full justify-center py-2 px-4 rounded-lg">Ver Online</a>`:""}
                            ${t.githubUrl?`<a href="${t.githubUrl}" target="_blank" rel="noopener noreferrer" class="flex items-center btn-secondary w-full justify-center py-2 px-4 rounded-lg">Código Fonte</a>`:""}
                        </div>
                    </div>
                </div>
            </div>
        `,document.body.classList.add("modal-open"),L.classList.remove("hidden"),(a=document.getElementById("modal-close-btn"))==null||a.addEventListener("click",k)}function k(){document.body.classList.remove("modal-open"),L.classList.add("hidden")}B.forEach(t=>{t.addEventListener("click",()=>{const n=t,a={title:n.dataset.title,description:n.dataset.description,technologies:n.dataset.technologies,projectUrl:n.dataset.projectUrl,githubUrl:n.dataset.githubUrl,imageUrl:n.dataset.imageUrl,category:n.dataset.category};T(a)})}),f==null||f.addEventListener("click",k);const e=document.getElementById("digit-canvas");if(e){const t=e.getContext("2d",{willReadFrequently:!0}),n=document.getElementById("predict-btn"),a=document.getElementById("clear-btn"),o=document.getElementById("prediction-result");let x=!1;if(t){t.fillStyle="black",t.fillRect(0,0,e.width,e.height);const j=s=>{x=!0,b(s)},y=()=>{x=!1,t.beginPath()},b=s=>{if(!x)return;s.preventDefault();const m=e.getBoundingClientRect(),l=(s instanceof MouseEvent?s.clientX:s.touches[0].clientX)-m.left,d=(s instanceof MouseEvent?s.clientY:s.touches[0].clientY)-m.top;t.lineWidth=28,t.lineCap="round",t.strokeStyle="white",t.lineTo(l,d),t.stroke(),t.beginPath(),t.moveTo(l,d)},D=()=>{t.fillStyle="black",t.fillRect(0,0,e.width,e.height),o&&(o.textContent="-")},z=async()=>{o&&(o.textContent="...");const m=t.getImageData(0,0,e.width,e.height).data;let l=e.width,d=e.height,g=0,w=0;for(let i=0;i<e.height;i++)for(let r=0;r<e.width;r++)m[(i*e.width+r)*4+3]>0&&(l=Math.min(l,r),d=Math.min(d,i),g=Math.max(g,r),w=Math.max(w,i));if(g===0){o&&(o.textContent="-");return}const h=g-l,v=w-d,M=Math.max(h,v),I=t.lineWidth,c=document.createElement("canvas");c.width=M+I*2,c.height=M+I*2;const E=c.getContext("2d");E.fillStyle="black",E.fillRect(0,0,c.width,c.height),E.drawImage(e,l,d,h,v,(c.width-h)/2,(c.height-v)/2,h,v);const R=c.toDataURL("image/png");try{const i=await fetch("/predict-digit/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:R})});if(!i.ok){const S=await i.json();throw new Error(S.error||`Erro ${i.status}`)}const r=await i.json();o&&(o.textContent=r.prediction.toString())}catch(i){console.error("Erro na previsão:",i),o&&(o.textContent="Erro")}};e.addEventListener("mousedown",j),e.addEventListener("mouseup",y),e.addEventListener("mouseleave",y),e.addEventListener("mousemove",b),e.addEventListener("touchstart",j,{passive:!1}),e.addEventListener("touchend",y),e.addEventListener("touchmove",b,{passive:!1}),n==null||n.addEventListener("click",z),a==null||a.addEventListener("click",D)}}});
